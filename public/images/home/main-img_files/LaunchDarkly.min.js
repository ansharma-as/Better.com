var LaunchDarkly_RS=function(e){"use strict";let t=4;const r={setLogLevel(e){switch(e.toUpperCase()){case"INFO":t=1;break;case"DEBUG":t=2;break;case"WARN":t=3;break;default:t=4}},info(...e){t<=1&&console.info(...e)},debug(...e){t<=2&&console.log(...e)},warn(...e){t<=3&&console.warn(...e)},error(...e){t<=4&&console.error(...e)}},a="RS_JS_SDK",o=["Request failed with status:"],s=e=>{const t=window.RudderStackGlobals&&window.RudderStackGlobals.errorReporting;t&&e instanceof Error&&t.notify(e)},i=e=>{const t=[];return function(e,a){if("object"!=typeof a||null===a)return a;for(;t.length>0&&t[t.length-1]!==this;)t.pop();return t.includes(a)?(r.debug(`Circular Reference detected for key: ${e}`),"[Circular Reference]"):(t.push(a),a)}},n=(e,t)=>{try{return JSON.stringify(e,i())}catch(e){return r.warn("Failed to convert the value to a JSON string."),null}},l=(e,t,i)=>{let l;try{l=((e,t,r)=>{let o;try{o="string"==typeof e?e:e instanceof Error||e.message?e.message:n(e)}catch(e){o=""}if("object"==typeof(s=e)&&null!==s&&"target"in s){if(e.target&&"script"!==e.target.localName)return"";if(e.target.dataset&&(e.target.dataset.loader!==a||"true"!==e.target.dataset.isnonnativesdk))return"";if(o=`error in script loading:: src::  ${e.target.src} id:: ${e.target.id}`,"ad-block"===e.target.id)return r.page("RudderJS-Initiated","ad-block page request",{path:"/ad-blocked",title:o},r.sendAdblockPageOptions),""}var s;return`[handleError]:: "${o}"`})(e,0,i)}catch(t){r.error("[handleError] Exception:: ",t),r.error("[handleError] Original error:: ",n(e)),s(t)}l&&(r.error(l),(e=>!e.message||!o.some((t=>e.message.includes(t))))(e)&&s(e))},d="LAUNCHDARKLY",c="LaunchDarkly",u={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}};const h=new class{constructor(e,t){this.level=+t||u.ERROR.value,this.scope=e||""}setLogLevel(e){if(e&&"string"==typeof e){const t=e.toUpperCase();this.level=u[t]?u[t].value:this.level}}setScope(e){this.scope=e||this.scope}log(...e){this.logBase(e,u.LOG.value)}info(...e){this.logBase(e,u.INFO.value)}debug(...e){this.logBase(e,u.DEBUG.value)}warn(...e){this.logBase(e,u.WARN.value)}error(...e){this.logBase(e,u.ERROR.value)}logBase(e,t){if(this.level<=t){Object.values(u).find((e=>e.value===t)).method(...this.getLogData(e))}}getLogData(e){if(Array.isArray(e)&&e.length>0){let t="%c RS SDK";this.scope&&(t=`${t} - ${this.scope}`);t=`${t} %c ${e[0].trim()}`;const r=[];return r.push(t),r.push("font-weight: bold; background: black; color: white;"),r.push("font-weight: normal;"),r.push(...e.slice(1)),r}return e}}(c);return e.LaunchDarkly=class{constructor(e,t,r){t.logLevel&&h.setLogLevel(t.logLevel),this.analytics=t,this.name=d,this.clientSideId=e.clientSideId,this.anonymousUsersSharedKey=e.anonymousUsersSharedKey,({shouldApplyDeviceModeTransformation:this.shouldApplyDeviceModeTransformation,propagateEventsUntransformedOnError:this.propagateEventsUntransformedOnError,destinationId:this.destinationId}=null!=r?r:{})}init(){this.clientSideId?((e,t,r={})=>{try{if(document.getElementById(e))return;const o=document.createElement("script");o.src=t,o.async=void 0===r.async||r.async,o.type="text/javascript",o.id=e,!0!==r.skipDatasetAttributes&&(o.setAttribute("data-loader",a),void 0!==r.isNonNativeSDK&&o.setAttribute("data-isNonNativeSDK",r.isNonNativeSDK));const s=document.getElementsByTagName("head");if(s.length>0)s[0].insertBefore(o,s[0].firstChild);else{const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(o,e)}}catch(e){l(e)}})(null,"https://unpkg.com/launchdarkly-js-client-sdk@2"):h.error(`${this.name} :: Unable to initialize destination - clientSideId is missing in config`)}isLoaded(){return!!window.LDClient}isReady(){return this.isLoaded()}identify(e){const{message:t}=e,r=(a=t.integrations)&&(a[c]||a[d]);var a;const o=(null==r?void 0:r.key)||this.anonymousUsersSharedKey;this.launchDarklyUser=((e,t)=>{const r={key:e.userId||e.anonymousId},{traits:a}=e.context;return void 0!==a.anonymous&&(r.anonymous=a.anonymous,t&&(r.key=t)),void 0!==a.avatar&&(r.avatar=a.avatar),void 0!==a.country&&(r.country=a.country),void 0!==a.custom&&(r.custom=a.custom),void 0!==a.email&&(r.email=a.email),void 0!==a.firstName&&(r.firstName=a.firstName),void 0!==a.ip&&(r.ip=a.ip),void 0!==a.lastName&&(r.lastName=a.lastName),void 0!==a.name&&(r.name=a.name),void 0!==a.privateAttributeNames&&(r.privateAttributeNames=a.privateAttributeNames),void 0!==a.secondary&&(r.secondary=a.secondary),r})(t,o),window.ldclient?window.ldclient.identify(this.launchDarklyUser):window.ldclient=window.LDClient.initialize(this.clientSideId,this.launchDarklyUser)}track(e){const{event:t,properties:r}=e.message;window.ldclient?window.ldclient.track(t,r):h.error("track is not supported before identify")}alias(e){const{message:t}=e,r={key:t.userId};window.ldclient?window.ldclient.alias(r,this.launchDarklyUser):h.error("alias is not supported before identify")}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});
//# sourceMappingURL=LaunchDarkly.min.js.map
