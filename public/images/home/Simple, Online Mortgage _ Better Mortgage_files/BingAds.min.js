var BingAds_RS=function(t){"use strict";function e(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){e(t,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}const o={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}};var i,s,a,u,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function f(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}const p=l(function(){if(u)return a;u=1;const t=s?i:(s=1,i=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)});function e(t,e,n){return"function"==typeof n.join?n.join(t):t[0]+e+t[1]}function n(t,e,n){return"function"!=typeof n.isValid||n.isValid(t,e)}function r(e){return t(e)||Array.isArray(e)||"function"==typeof e}return a=function(o,i,s){if(t(s)||(s={default:s}),!r(o))return void 0!==s.default?s.default:o;"number"==typeof i&&(i=String(i));const a=Array.isArray(i),u="string"==typeof i,c=s.separator||".",l=s.joinChar||("string"==typeof c?c:".");if(!u&&!a)return o;if(u&&i in o)return n(i,o,s)?o[i]:s.default;let f=a?i:function(t,e,n){if("function"==typeof n.split)return n.split(t);return t.split(e)}(i,c,s),p=f.length,d=0;do{let t=f[d];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=e([t.slice(0,-1),f[++d]||""],l,s);if(t in o){if(!n(t,o,s))return s.default;o=o[t]}else{let r=!1,i=d+1;for(;i<p;)if(t=e([t,f[i++]],l,s),r=t in o){if(!n(t,o,s))return s.default;o=o[t],d=i-1;break}if(!r)return s.default}}while(++d<p&&r(o));return d===p?o:s.default}}());for(var d=256;d--;)(d+256).toString(16).substring(1);for(var h=0;h<256;h++)(h+256).toString(16).substring(1);var y={exports:{}};var g={exports:{}};const v=f(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var m;g.exports;function w(){return m||(m=1,g.exports=(t=t||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==c&&c.crypto&&(n=c.crypto),!n)try{n=v}catch(t){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},s=i.lib={},a=s.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)e[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new u.init(e,t)}}),l=i.enc={},f=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new u.init(n,e/2)}},p=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new u.init(n,e)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(p.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return p.parse(unescape(encodeURIComponent(t)))}},h=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,l=t.min(4*c,i);if(c){for(var f=0;f<c;f+=s)this._doProcessBlock(o,f);n=o.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});s.Hasher=h.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new y.HMAC.init(t,n).finalize(e)}}});var y=i.algo={};return i}(Math),t)),g.exports;var t}var b,_;const O=l((b||(b=1,y.exports=(_=w(),function(t){var e=_,n=e.lib,r=n.WordArray,o=n.Hasher,i=e.algo,s=[],a=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(s[o]=n(t.pow(r,.5))),a[o]=n(t.pow(r,1/3)),o++),r++}();var u=[],c=i.SHA256=o.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],c=n[4],l=n[5],f=n[6],p=n[7],d=0;d<64;d++){if(d<16)u[d]=0|t[e+d];else{var h=u[d-15],y=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=u[d-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[d]=y+u[d-7]+v+u[d-16]}var m=r&o^r&i^o&i,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=p+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&f)+a[d]+u[d];p=f,f=l,l=c,c=s+b|0,s=i,i=o,o=r,r=b+(w+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+p|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(c),e.HmacSHA256=o._createHmacHelper(c)}(Math),_.SHA256)),y.exports));function B(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function S(t){return function e(n){return 0===arguments.length||B(n)?e:t.apply(this,arguments)}}function A(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return B(n)?e:S((function(e){return t(n,e)}));default:return B(n)&&B(r)?e:B(n)?S((function(e){return t(e,r)})):B(r)?S((function(e){return t(n,e)})):t(n,r)}}}var j=A((function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}));const E=t=>!(t=>void 0===t)(t)&&(t=>null!=t)(t),x=["event","category","category_id","currency","total","value","revenue","ecomm_category","transaction_id","order_id","checkout_id","ecomm_pagetype","pagetype","query","products","product_id","sku","event_action","items"],R=t=>{const{properties:e={}}=t,{category_id:n,total:o,value:i,ecomm_category:s,transaction_id:a,order_id:u,checkout_id:c,ecomm_pagetype:l,pagetype:f,query:p}=e,d={ecomm_totalvalue:o||i,search_term:p,ecomm_query:p,ecomm_category:s||n,transaction_id:a||u||c,ecomm_pagetype:l||f||"other"},h=(t=>{const e=[],n=[];(Array.isArray(t.products)?t.products:[t]).forEach((t=>{const{product_id:r,sku:o,price:i,quantity:s=1}=t,a=r||o;if(a){e.push(a);const t={id:a,quantity:s};i&&!Number.isNaN(i)&&(t.price=i),n.push(t)}}));const r={};return n.length>0&&(r.ecomm_prodid=e,r.items=n),r})(e);return r(r({},d),h)};const I=(t,e)=>{const n=p(t,"context.traits.email")||p(t,"traits.email"),r=p(t,"context.traits.phone")||p(t,"traits.phone"),o={};if(E(n)&&(o.em=e?(t=>{let e=t.trim().toLowerCase();if(e=e.replace(/\+[^@]+/g,""),e=e.replace(/\./g,((t,n)=>n<e.indexOf("@")?"":t)),e.includes("@")&&/\.\w+$/.test(e)&&!e.startsWith(".")&&!e.endsWith("."))return e=e.replace(/\s/g,""),e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),O(e).toString()})(n):n),E(r)&&(o.ph=e?function(t){const e=t.replace(/\D/g,""),n=e.startsWith("+")?e:`+${e}`;return O(n).toString()}(r):r),(E(n)&&!E(r)||!E(n)&&E(r))&&(o[""]=""),E(o.em)||E(o.ph))return o},D=new class{constructor(t,e){this.level=+e||o.ERROR.value,this.scope=t||""}setLogLevel(t){if(t&&"string"==typeof t){const e=t.toUpperCase();this.level=o[e]?o[e].value:this.level}}setScope(t){this.scope=t||this.scope}log(...t){this.logBase(t,o.LOG.value)}info(...t){this.logBase(t,o.INFO.value)}debug(...t){this.logBase(t,o.DEBUG.value)}warn(...t){this.logBase(t,o.WARN.value)}error(...t){this.logBase(t,o.ERROR.value)}logBase(t,e){if(this.level<=e){Object.values(o).find((t=>t.value===e)).method(...this.getLogData(t))}}getLogData(t){if(Array.isArray(t)&&t.length>0){let e="%c RS SDK";this.scope&&(e=`${e} - ${this.scope}`);e=`${e} %c ${t[0].trim()}`;const n=[];return n.push(e),n.push("font-weight: bold; background: black; color: white;"),n.push("font-weight: normal;"),n.push(...t.slice(1)),n}return t}}("Bing Ads");return t.BingAds=class{constructor(t,n,o){e(this,"track",(t=>{const{type:e,properties:n,context:o}=t.message,i=(null==n?void 0:n.event_action)||e;if(!i)return void D.error("Event type is not present");let s=r(r({},(t=>{const{event:e,properties:n={}}=t,{category:r,currency:o,total:i,value:s,revenue:a}=n;return{event_label:e,event_category:r,currency:o,revenue_value:i||s||a}})(t.message)),R(t.message));const a=function(t,e,n,r){const o=[],i=e||{};return Array.isArray(n)?n.forEach((e=>{const n=p(t,e);n&&(Object.keys(n).forEach((t=>{r.includes(t)||o.push(t)})),o.forEach((t=>{void 0!==n[t]&&(i[t]=p(n,t))})))})):"root"===n&&(Object.keys(t).forEach((t=>{r.includes(t)||o.push(t)})),o.forEach((e=>{void 0!==t[e]&&(i[e]=p(t,e))}))),i}(t.message,{},["properties"],x);var u;(s=r(r({},s),a),!0===this.enableEnhancedConversions)&&(s.pid=(null==o||null===(u=o.traits)||void 0===u?void 0:u.pid)||I(o,this.isHashRequired));s=j(E,s),window[this.uniqueId].push("event",i,s)})),n.logLevel&&D.setLogLevel(n.logLevel),this.analytics=n,this.tagID=t.tagID,this.name="BINGADS",({shouldApplyDeviceModeTransformation:this.shouldApplyDeviceModeTransformation,propagateEventsUntransformedOnError:this.propagateEventsUntransformedOnError,destinationId:this.destinationId}=null!=o?o:{}),this.uniqueId=`bing${this.tagID}`,this.enableEnhancedConversions=t.enableEnhancedConversions,this.isHashRequired=t.isHashRequired}init(){var t,e;t=this.uniqueId,e=this.tagID,((t,n,r,o,i)=>{let s,a,u;t[i]=t[i]||[],s=()=>{const n={ti:e};n.q=t[i],t[i]=new UET(n)},a=n.createElement(r),a.src="https://bat.bing.com/bat.js",a.async=1,a.setAttribute("data-loader","RS_JS_SDK"),a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e&&"function"==typeof t.UET||(s(),a.onload=a.onreadystatechange=null)},u=n.getElementsByTagName(r)[0],u.parentNode.insertBefore(a,u)})(window,document,"script",0,t)}isLoaded(){return!!window.UET&&!!window[this.uniqueId]&&window[this.uniqueId].push!==Array.prototype.push}isReady(){return!(!window[this.uniqueId]||window[this.uniqueId].push===Array.prototype.push)}page(){window[this.uniqueId].push("pageLoad")}},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t}({});
//# sourceMappingURL=BingAds.min.js.map
